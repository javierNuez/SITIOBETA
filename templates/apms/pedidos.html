{% include 'apms/cabecera.html' %}
<input type="text" id="hashUsuarioO" hidden>
<script>
    var hashUsuario = sessionStorage.getItem("hash");
    console.log(hashUsuario);
    document.getElementById("hashUsuarioO").value = hashUsuario;

    if (!(hashUsuario)) {
        window.location.href = "/";
    }

</script>
{% with messages= get_flashed_messages() %}

{% if messages %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    <strong>¡Cuidado!</strong> {% for message in messages %}{{ message }}{% endfor %}
</div>
{% endif %}
{% endwith %}

<div class="card-body">
    <div class="card border-info">
        <div class="card-body" style="margin-left: 0%;">
            <table id="myTable" class="table-light">
                <thead>
                    <tr class="table-light">
                        <th scope="col" style="text-align:center;">Pedido nº</th>
                        <th scope="col" style="text-align:center;">Usuario</th>
                        <th scope="col" style="text-align:center;">Cod.Drog</th>
                        <th scope="col" style="text-align:center;">Drogueria</th>
                        <th scope="col" style="text-align:center;">Cod.Cli.</th>
                        <th scope="col" style="text-align:center;">Cliente.</th>
                        <th scope="col" style="text-align:center;">Unidades</th>
                        <th scope="col" style="text-align:center;">Fecha</th>
                        <th scope="col" style="text-align:center;">Aprobado</th>
                        <th scope="col" style="text-align:center;">Acciones</th>
                    </tr>
                </thead>
                {% for i in lospedidos %}
                <tr class="table-light">

                    <td style="text-align: center;" scope="col" class="table-light">

                        <h5>{{i[0]}}</h5>
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[1]}}
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[2]}}
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[8]}}
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[3]}}
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[9]}}
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[7]}}
                        <!--<input type="text" value="{{i[4]}}" id="{{i[0]}}" hidden>
                        <ul id="lista{{i[0]}}">
                        </ul>-->
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[5]}}
                    </td>
                    <td style="text-align: center;" scope="col" class="table-light">

                        {{i[6]}}
                    </td>
                    <td id="acciones" align="center">

                        <div class="row">
                            <div class="col">
                                <a class="btn btn-success btn-sm" href="#" role="button"
                                    style="display:center;width: 69px;">Ver</a>
                            </div>
                            <div class="col" hidden>
                                <a class="btn btn-info btn-sm" href="#" role="button"
                                    style="display:center;">Aprobar</a>
                            </div>
                        </div>
                    </td>

                </tr>{% endfor %}
            </table>

        </div>

    </div>
</div>
<!--
<script>

    const listaPedidos = document.getElementsByTagName("h5");
    //console.log(listaPedidos[0].textContent);
    //console.log(listaPedidos.length);
    for (i = 0; i < listaPedidos.length; i++) {
        let pedido = listaPedidos[i].textContent;
        const listaProductosa = document.getElementById(pedido).value;
        const p = JSON.parse(listaProductosa);
        ancho = p.length;
        //console.log(ancho);

        for (x = 0; x < ancho; x++) {
            // Create an "li" node:
            const node = document.createElement("li");

            // Create a text node:
            const textnode = document.createTextNode(p[x][10] + " " + p[x][17] + "u.");

            // Append the text node to the "li" node:
            if (p[x][17] != 0) {
                node.appendChild(textnode);
                nombreL = "lista" + pedido;
                // Append the "li" node to the list:
                document.getElementById(nombreL).appendChild(node);
            }
        }
    }

</script>
-->
{% include 'apms/pie.html' %}